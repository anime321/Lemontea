@using Lemontea.Shared.Models.Dto
@model AziendaDto

<style>
  .elimina-btn {
    background-color: crimson;
  }

    .elimina-btn:hover {
      background-color: darkred;
      color: #d3d3d3;
    }
</style>

<div>
  @(Html.Kendo().Button()
  .Name("goBackButton")
  .Content("Indietro")
  .Events(config =>
  {
    config.Click("goToAziendaIndex");
  })
  )
</div>

<div class="card" style="width: 24rem; margin-top: 4px; margin-bottom: 4px;">
  <div class="card-header">
    @Model.RagioneSociale
  </div>
  <div class="card-body">
    <p class="card-text">
      <div class="row">
        <div class="col-1">
          <i class="fas fa-map-marker-alt" style="display: inline"></i>
        </div>
        <div class="col">
          @Model.Indirizzo @Model.NCivico, @Model.Citta
        </div>
      </div>
    </p>
    <p class="card-text"><i class="far fa-envelope" style="display: inline"></i> @Model.Email</p>
    <p class="card-text"><i class="fas fa-info-circle" style="display: inline"></i> @Model.SitoWeb</p>
  </div>

  <div style="margin-top: 4px; margin-bottom: 4px; margin-left:auto; margin-right: 4px">
    @(Html.Kendo().Button()
      .Name("editAziendaButton")
      .Content("Modifica")
      .Events(config =>
      {
        config.Click("goToAddAzienda");
      })
    )
    @(Html.Kendo().Button()
      .Name("deleteAziendaButton")
      .Content("Elimina")
      .HtmlAttributes(new { @class = "elimina-btn" })
      .Events(config =>
      {
        config.Click("removeAzienda");
      })
    )
  </div>
</div>

<div>
  @await Html.PartialAsync("_ContattiAzienda", Model.Contatti)
</div>


<script>
  function goToAziendaIndex(e) {
    window.location.href = "@Url.Action("Index", "Azienda")";
  }

  function goToAddAzienda(e) {
    window.location.href = "@Url.Action("AddAzienda", "Azienda", Model)";
  }

  function removeAzienda(e) {
    $.ajax({
      url: '/Azienda/RemoveAzienda/' + @Model.Id,
      method: 'DELETE',
      success: data => {
        window.location.href = "@Url.Action("Index", "Azienda")";
      }
    })
  }
</script>
